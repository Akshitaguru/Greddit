{"ast":null,"code":"function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport logo from './fb-logo.png';\nimport './facebook.css';\nconst facebookApiUrl = 'https://connect.facebook.net/en_US/sdk.js';\nconst facebookScriptId = 'facebook-login'; // Docs\n// https://developers.facebook.com/apps/\n\n/*global FB*/\n\nclass FacebookButton extends React.Component {\n  constructor(...args) {\n    super(...args);\n    _defineProperty(this, \"componentDidMount\", () => {\n      var found = false;\n      const elements = document.getElementsByTagName('script');\n      if (elements.length > 0) {\n        for (let index = 0; index < elements.length; index++) {\n          if (elements[index].src === facebookApiUrl) {\n            found = true;\n            break;\n          }\n        }\n      }\n      if (found) {\n        console.log('Facebook API - already found in page');\n        this.startApp();\n      } else {\n        console.log('Facebook API - not found in page so we add it');\n        let scriptElement = document.createElement('script');\n        scriptElement.id = facebookScriptId;\n        scriptElement.onload = this.startApp;\n        scriptElement.src = facebookApiUrl;\n        document.head.append(scriptElement);\n      }\n    });\n    _defineProperty(this, \"loginClick\", () => {\n      const scope = this;\n      FB.login(function (response) {\n        if (response.authResponse) {\n          let facebookAuthResponse = response.authResponse;\n          FB.api('/me', function (facebookProfile) {\n            scope.onSuccess({\n              facebookProfile,\n              facebookAuthResponse\n            });\n          });\n        } else {\n          this.onFailure(response);\n        }\n      });\n    });\n    _defineProperty(this, \"onSuccess\", facebookProfile => {\n      console.dir('Good to see you, ' + facebookProfile.name + '.');\n      console.dir(facebookProfile);\n      if (this.props.onSuccess) this.props.onSuccess(facebookProfile);\n    });\n    _defineProperty(this, \"onFailure\", error => {\n      if (this.props.onFailure) this.props.onFailure(error);\n    });\n    _defineProperty(this, \"startApp\", () => {\n      FB.init({\n        appId: this.props.appId,\n        autoLogAppEvents: true,\n        xfbml: true,\n        version: 'v3.2'\n      });\n    });\n  }\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"facebookLoginButton\",\n      onClick: this.loginClick\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: logo,\n      alt: \"Facebook logo\",\n      style: {\n        width: 50,\n        height: 50,\n        cursor: 'pointer'\n      }\n    })));\n  }\n}\nFacebookButton.propTypes = {\n  appId: PropTypes.string.isRequired,\n  onSuccess: PropTypes.func,\n  onFailure: PropTypes.func\n};\nexport default FacebookButton;","map":null,"metadata":{},"sourceType":"module"}